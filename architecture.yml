elements:
  - name: Pippy
    kind: actor
  - name: email-client
  - name: house
    children:
      - plug
      - router
      - ups
  - name: system
    children:
      - name: sensor
        children:
          - name: zero_ups
          - name: raspberry_pi
            children:
              - edge_app
      - name: dashboard
      - database
      - name: consumer
        tags: [lambda]
      - name: emailer
        tags: [lambda]
      - name: db-cron
        tags: [lambda]
      - name: api
        tags: [lambda]
      - name: broker
        chilren:
          - alive_queue
          - status_queue
associations:
  - source: house/plug
    destination: house/ups
    tag: power
  - source: house/ups
    destination: house/router
    tag: power
  - source: system/sensor/raspberry_pi
    destination: house/router
    tag: wifi
  - source: system/sensor/zero_ups
    destination: system/sensor/raspberry_pi/edge_app
    tag: status
  - source: system/sensor/zero_ups
    destination: system/sensor/raspberry_pi
    tag: power
  - source: system/sensor/raspberry_pi/edge_app
    destination: system/broker
    tag: update.power
  - source: system/sensor/raspberry_pi/edge_app
    destination: system/broker
    tag: update.alive
  - source: system/broker
    destination: system/consumer
    tag: update.power
  - source: system/broker
    destination: system/consumer
    tag: update.alive
  - source: system/consumer
    destination: system/database
    tag: record-power-changed
  - source: system/consumer
    destination: system/database
    tag: record-alive
  - source: system/consumer
    destination: system/broker
    tag: email.power
  - source: system/database
    destination: system/db-cron
  - source: system/db-cron
    destination: system/broker
    tag: email.lost
  - source: system/broker
    destination: system/emailer
    tag: email.*
  - source: system/emailer
    destination: email-client
    tag: email
  - source: email-client
    destination: Pippy
  - source: system/database
    destination: system/api
  - source: system/api
    destination: system/dashboard
  - source: system/dashboard
    destination: Pippy
